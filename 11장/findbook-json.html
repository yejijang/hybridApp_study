<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
		content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
  <title>Book Retrieval</title>
  <style>
  	h3 { margin-left: 100px; }
	table { border-style: ridge; border-width: 4px; width: 370px; }
	td { background-color : silver; width : 100px; }
	.u_col1 { width: 100px; }
	.u_col2 * { width: 250px; }
	.u_center { text-align: center; }
  </style>
  <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
  <script src="book2.json"></script>
  <script type="text/javascript">
	var count=0, length=0;   // 레코드 번호, 전체 레코드 개수를 위한 전역 변수
	var Doc;                 // XML 문서 DOM 복합 객체 참조를 위한 전역 변수
	$(document).ready( function() {  
		$.getJSON('book2.json',function(jsonData){
			length = jsonData.booklist.length;
			console.log(length);
			var title = jsonData.booklist[count].title;
			var find = jsonData.booklist[count].bookKind;
			var author = jsonData.booklist[count].author;
			var publisher = jsonData.booklist[count].publisher;
			var price = jsonData.booklist[count].price;
			var year = jsonData.booklist[count].year;
			$("#td1").text(title);
			$("#td2").text(find);
			$("#td3").text(author);
			$("#td4").text(publisher);
			$("#td5").text(price);
			$("#td6").text(year);
			$("#txt").text(count+1+"/"+length);
		});
		
	  // 다음 버튼을 눌렀을 경우 실행
		$("input[name='btnNext']").click(function() {
			if(count < length-1) {
				count=count+1;
				display();	
			}				
		});
		
	  // 이전 버튼을 눌렀을 경우 실행
		$("input[name='btnPrevious']").click(function() {
			if(count > 0) {
				count=count-1;				
				display();			
			}					
		});
		
	  // 처음 버튼을 눌렀을 경우 실행		
		$("input[name='btnFirst']").click(function() {
			count=0; 
			display();		
		});
		
	  // 마지막 버튼을 눌렀을 경우 실행		
		$("input[name='btnLast']").click(function() {
			count=4; 
			display();		
		});
		
	  // 도서 정보를 표시			
		function	display(){
			$.getJSON('book2.json',function(jsonData){
			length = jsonData.booklist.length;
			console.log(length);
			var title = jsonData.booklist[count].title;
			var find = jsonData.booklist[count].bookKind;
			var author = jsonData.booklist[count].author;
			var publisher = jsonData.booklist[count].publisher;
			var price = jsonData.booklist[count].price;
			var year = jsonData.booklist[count].year;
			$("#td1").text(title);
			$("#td2").text(find);
			$("#td3").text(author);
			$("#td4").text(publisher);
			$("#td5").text(price);
			$("#td6").text(year);
			$("#txt").text(count+1+"/"+length);
		});
			}
	});	
  </script>
</head>
<body>
	<form name="form1">
		<h3>JSON 도서 정보 검색</h3>
		<table id="tableList">
		<tr>
			<td class="u_col1">책제목</td>
         	<td class="u_col2" id="td1"></td>
		</tr>
		<tr>
			<td class="u_col1">책종류</td>
         	<td class="u_col2" id="td2"></td>
		</tr>
		<tr>
			<td class="u_col1">책저자</td>
			<td class="u_col2" id="td3"></td>
		</tr>
		<tr>
			<td class="u_col1">출판사</td>
			<td class="u_col2" id="td4"></td>
		</tr>
		<tr>
			<td class="u_col1">책가격</td>
			<td class="u_col2" id="td5"></td>
		</tr>
		<tr>
			<td class="u_col1">출판년도</td>
			<td class="u_col2" id="td6"></td>
		</tr>
		<tr>
			<td class="u_center" colspan="2">
				<input type="button" name="btnFirst" value=" 처음 "/>
				<input type="button" name="btnPrevious" value=" 이전 "/>
				<input type="button" name="btnNext" value=" 다음 "/>
				<input type="button" name="btnLast" value="마지막"/>
				<label id="txt"></label>
			</td>
		</tr>
		</table>
	</form>
</body>
</html>
